# 多订阅需求说明

## 功能概述

1. 支持多个订阅参数
2. 多个订阅中的节点合并
3. 添加每个订阅的流量统计
4. 其他优化

## 详细描述

### 支持多个订阅参数

适当改造参数解析，支持接收多个订阅链接

### 多个订阅中的节点合并

基于需求1，按顺序合并每个订阅中的节点。具体取原始订阅中的哪部分部分，参照原代码。

### 添加每个订阅的流量统计

1. 解析原始订阅中的`Subscription-Userinfo`，格式如下：
   ```
   upload=1638257504; download=13418441583; total=1073839341568; expire=1791390742
   ```
   其中，upload代表上传字节数，download代表下载字节数，total代表总额度字节数，expire代表过期时间（UNIX时间戳）
2. 返回的订阅中的Subscription-Userinfo头，将upload、download、total加和，expire取最大
3. 在所有转换逻辑结束后，在最前面添加一个节点组，用于显示每个订阅的用量信息。

    命名规则：`{name}：{used}/{total}`，单位为GB，不必写出单位，保留1位小数。name取订阅`Content-Disposition`头中的filename(去除引号和扩展名)。
4. 如果任意一份订阅解析错误，返回500，并返回`{订阅url}: \n{原始返回}`。